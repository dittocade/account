---
import { actions } from "astro:actions";
import Layout from "@layouts/Layout.astro";
import Form from "@fancade-club/comps/forms/Form.astro";
import Input from "@fancade-club/comps/forms/Input.astro"
import Button from "@fancade-club/comps/forms/Button.astro";

const {user} = Astro.locals
if (!user) return Astro.redirect("/");
---

<Layout title="Account Deletion">
  <p>You are about to delete your account forever (that's a long time). This will remove any identifying information attributed to your account. To verify it's you, please enter your username.</p>
  <Form method="POST" action={"/" + actions.delete}>
    <Input required name="slug" label="Username" pattern={`^${user.slug}$`}></Input>
    <Button>Yes, delete my account and all its data</Button>
  </Form>
</Layout>
